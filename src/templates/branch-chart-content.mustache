{{! Template for branch chart content only (for updates without recreating the details element) }}
{{#pipeline}}
  {{#hasJobs}}
    <div style="padding: 0.5rem 1rem; color: #6b7280; font-size: 0.8rem;">
      <small>Jobs actualizados <span class="refresh-time" data-timestamp="{{lastRefresh}}">recién</span></small>
    </div>
    {{#hasStages}}
      <div class="pipeline-stages">
        <div class="stages-container">
          {{#stages}}
            <div class="stage">
              <div class="stage-header">{{name}}</div>
              <div class="stage-jobs">
                {{#jobs}}
                  <a href="{{web_url}}" 
                     target="_blank" 
                     class="job-item" 
                     data-status="{{status}}"
                     title="{{name}} - {{status}}">
                    {{name}}
                  </a>
                {{/jobs}}
              </div>
            </div>
          {{/stages}}
        </div>
      </div>
    {{/hasStages}}
    {{^hasStages}}
      <div class="jobs-list">
        {{#jobs}}
          <a href="{{web_url}}" 
             target="_blank" 
             class="job-item" 
             data-status="{{status}}"
             title="{{name}} - {{status}}">
            {{name}}
          </a>
        {{/jobs}}
      </div>
    {{/hasStages}}
  {{/hasJobs}}
  {{^hasJobs}}
    <div class="pipeline-stages">
      {{#jobsWereRequested}}
        <p><em>Pipeline sin jobs</em></p>
        <p style="color:#6b7280; font-size:0.8rem"><small>Actualizado <span class="refresh-time" data-timestamp="{{lastRefresh}}">recién</span></small></p>
      {{/jobsWereRequested}}
      {{^jobsWereRequested}}
        <p><em>⏳ Cargando jobs...</em></p>
      {{/jobsWereRequested}}
    </div>
  {{/hasJobs}}
{{/pipeline}}
{{^pipeline}}
  {{#error}}
    <div class="pipeline-stages">
      <p><em>Error: {{.}}</em></p>
    </div>
  {{/error}}
{{/pipeline}}
