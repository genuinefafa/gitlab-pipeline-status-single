{{! Template for a single project section with all branches }}
{{! Used by: GET /api/projects/:serverName/:projectPath/branches }}
<article id="project-{{safeProjectId}}"
         data-server="{{serverName}}"
         data-project="{{projectPath}}">
  <h3>
    <a href="{{url}}" target="_blank">{{name}}</a>
    <span id="spinner-project-{{safeProjectId}}" class="htmx-indicator">⏳</span>
  </h3>
  {{#error}}
    <p><em>Error: {{.}}</em></p>
  {{/error}}
  {{^error}}
    <table>
      <thead>
        <tr>
          <th>Branch</th>
          <th>Pipeline</th>
          <th>Commit</th>
        </tr>
      </thead>
      <tbody id="branches-{{safeProjectId}}">
        {{#branches}}
          {{{.}}}
        {{/branches}}
        {{^branches}}
          <tr hx-get="/api/projects/{{serverName}}/{{projectPath}}/branches?includeJobs=true&rowsOnly=true"
              hx-trigger="load"
              hx-target="#branches-{{safeProjectId}}"
              hx-swap="innerHTML"
              hx-indicator="#spinner-project-{{safeProjectId}}">
            <td colspan="3"><em>⏳ Cargando branches...</em></td>
          </tr>
        {{/branches}}
      </tbody>
    </table>
  {{/error}}
</article>
